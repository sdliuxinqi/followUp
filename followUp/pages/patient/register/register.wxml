<!--pages/patient/register/register.wxml-->
<view class="page-container">
  <!-- 表单卡片 -->
  <view class="form-card">
    <view class="form-title">患者基本信息</view>
    
    <form bindsubmit="submitRegister">
      <!-- 姓名 -->
      <view class="form-item">
        <view class="label-row">
          <text class="label">姓名</text>
          <text class="required">*</text>
        </view>
        <input class="input" name="name" placeholder="请输入您的姓名" value="{{formData.name}}" />
      </view>

      <!-- 出生日期和性别 -->
      <view class="form-row">
        <view class="form-item half-item">
          <view class="label-row">
            <text class="label">出生日期</text>
            <text class="required">*</text>
          </view>
          <picker 
            mode="date" 
            value="{{formData.birthDate}}" 
            start="1900-01-01"
            end="{{currentDate}}"
            bindchange="onDateChange"
          >
            <view class="date-selector">
              <text class="date-text {{formData.birthDate ? '' : 'placeholder'}}">
                {{formData.birthDate || '请选择出生日期'}}
              </text>
            </view>
          </picker>
        </view>

        <view class="form-item half-item">
          <view class="label-row">
            <text class="label">性别</text>
            <text class="required">*</text>
          </view>
          <view class="gender-selector">
            <view class="gender-btn {{formData.gender === '男' ? 'active' : ''}}" bindtap="selectGender" data-gender="男">
              <text class="gender-text">男</text>
            </view>
            <view class="gender-btn {{formData.gender === '女' ? 'active' : ''}}" bindtap="selectGender" data-gender="女">
              <text class="gender-text">女</text>
            </view>
          </view>
        </view>
      </view>

      <!-- 手机号 -->
      <view class="form-item">
        <view class="label-row">
          <text class="label">手机号</text>
          <text class="required">*</text>
        </view>
        <view class="phone-input-wrapper">
          <input class="input phone-input" name="phone" type="number" placeholder="请输入手机号" value="{{formData.phone}}" />
        </view>
      </view>

      <!-- 提交按钮 -->
      <button class="submit-btn" form-type="submit" loading="{{loading}}">
        {{loading ? '提交中...' : '提交登记'}}
      </button>
    </form>

    <!-- 底部提示 -->
    <view class="footer-note">
      <text class="note-text">注：提交后可在扫描随访计划二维码时补充住院号和治疗组信息</text>
    </view>
  </view>
</view>

