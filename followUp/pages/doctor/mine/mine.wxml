<!--pages/doctor/mine/mine.wxml-->
<view class="page-container">
  
  <!-- ä¸ªäººä¿¡æ¯å¤´éƒ¨ -->
  <view class="profile-header">
    <view class="avatar-section">
      <view class="avatar">{{profile.name ? profile.name.substring(0,1) : 'åŒ»'}}</view>
      <view class="user-info">
        <view class="user-name">{{profile.name || 'æœªè®¾ç½®å§“å'}}</view>
        <view class="status-badge {{profile.status}}">
          <text class="status-icon">{{profile.status === 'approved' ? 'âœ“' : profile.status === 'pending' ? 'â±' : 'âœ•'}}</text>
          <text class="status-text">{{profile.statusText}}</text>
        </view>
      </view>
    </view>
  </view>

  <!-- åŸºæœ¬ä¿¡æ¯å¡ç‰‡ -->
  <view class="section-header">
    <view class="section-title">åŸºæœ¬ä¿¡æ¯</view>
  </view>

  <view class="info-card">
    <view class="info-item">
      <view class="info-label">
        <text class="label-icon">ğŸ‘¤</text>
        <text class="label-text">å§“å</text>
      </view>
      <input class="info-input"
             placeholder="è¯·è¾“å…¥å§“å"
             value="{{editForm.name}}"
             bindinput="onNameChange" />
    </view>

    <view class="info-item">
      <view class="info-label">
        <text class="label-icon">ğŸ¥</text>
        <text class="label-text">åŒ»é™¢</text>
      </view>
      <input class="info-input"
             placeholder="è¯·è¾“å…¥åŒ»é™¢åç§°"
             value="{{editForm.hospital}}"
             bindinput="onHospitalChange" />
    </view>

    <view class="info-item">
      <view class="info-label">
        <text class="label-icon">ğŸ¢</text>
        <text class="label-text">ç§‘å®¤</text>
      </view>
      <input class="info-input"
             placeholder="è¯·è¾“å…¥ç§‘å®¤"
             value="{{editForm.department}}"
             bindinput="onDepartmentChange" />
    </view>
  </view>

  <!-- å·¥ä½œè¯ä¸Šä¼  -->
  <view class="section-header">
    <view class="section-title">å·¥ä½œè¯æ˜</view>
  </view>

  <view class="workcard-card">
    <view wx:if="{{!editForm.workCardImage}}" class="upload-area" bindtap="chooseWorkCardImage">
      <view class="upload-icon">+</view>
      <view class="upload-text">ç‚¹å‡»ä¸Šä¼ å·¥ä½œè¯</view>
      <view class="upload-hint">æ”¯æŒjpgã€pngæ ¼å¼ï¼Œå¤§å°ä¸è¶…è¿‡5MB</view>
    </view>
    <view wx:else class="preview-area">
      <image class="preview-image" src="{{editForm.workCardImage}}" mode="aspectFit" />
      <view class="image-actions">
        <view class="action-button preview-button" bindtap="previewImage">
          <text class="button-icon">ğŸ‘</text>
          <text>é¢„è§ˆ</text>
        </view>
        <view class="action-button delete-button" bindtap="removeWorkCardImage">
          <text class="button-icon">ğŸ—‘</text>
          <text>åˆ é™¤</text>
        </view>
      </view>
    </view>
  </view>

  <!-- ä¿å­˜æŒ‰é’® -->
  <view class="save-button {{saving ? 'disabled' : ''}}" bindtap="saveProfile">
    <text class="save-button-text">{{saving ? 'ä¿å­˜ä¸­...' : 'ä¿å­˜ä¿®æ”¹'}}</text>
  </view>
</view>